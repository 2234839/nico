<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="nico 0.4.4">
    <meta name="theme" content="one 0.2">
    <title>Nico 主题</title>
    <link rel="stylesheet" href="../static/one.css" />
    <link rel="stylesheet" href="../static/yue.css" />
    <link rel="stylesheet" href="../static/syntax.css" />
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-21475122-5']);
      _gaq.push(['_trackPageview']);
      _gaq.push(['_trackPageLoadTime']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div class="navigation" role="navigation">
      <div class="container">
        <div class="brand">
          <a class="home" href="../">Nico</a>
        </div>
        <div class="menu">
          <a href="../en/">English</a>
          <a href="./">中文文档</a>
        </div>
      </div>
    </div>
    <div class="document yue">
<div class="hentry">
  <h1 class="entry-title">Nico 主题</h1>
  <div class="entry-content"><p>想要开发自己的主题？其实很简单。大多数时候，例子会更有帮助，所以去看 <a href="https://github.com/lepture/nico-one">one</a> 吧。</p>
<h2 id="结构">结构</h2>
<p>一个主题包含三个部分：主题的信息，模板，静态文件。它的文件目录结构如下：</p>
<pre>theme-name&#47;
    theme.js             - 主题的信息，其实可以没有
    templates&#47;           - 模板
        post.html
        page.html
        ...
    static&#47;              - 静态文件
        app.css
        jquery.js
        ...
</pre><h2 id="模板">模板</h2>
<p>Nico 使用 swig 做为模板引擎，所以你需要了解一下 swig 的语法。如果你有用过 Django 或者 Jinja，你已经大致了解语法了。更多内容请访问 <a href="http://paularmstrong.github.com/swig/">swig</a>。</p>

<p>不同的 writer 需要不用的模板，比如 PostWriter 需要 post.html，ArchiveWriter 需要 archive.html。一个完备的主题应该包含：</p>
<pre>post.html             - PostWriter
page.html             - PageWriter
archive.html          - ArchiveWriter, YearWriter, DirectoryWriter ...
feed.html             - FeedWriter
</pre>
<p>当然，如果你的主题只供自己使用，只需要提供自己所需的模板就可以了。</p>
<h3 id="jade">Jade</h3>
<p>将模板引擎换为 Jade:</p>
<pre>&#47;&#47; nico.json
{
    &quot;engine&quot;: &quot;jade&quot;
}
</pre>
<p>你需要额外安装 Jade，并保正 Jade 能被 require。</p>
<h2 id="变量">变量</h2>
<ul>
<li>全局变量：在所有模板中都可以访问的变量，</li>
<li>模板变量：只有在特定的模板中才有的变量，</li>
</ul>
<h3 id="system">system</h3>
<p>全局变量，这个是系统变量：</p>
<pre>{
    &quot;name&quot;: &quot;nico&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;homepage&quot;: &quot;http:&#47;&#47;lab.lepture.com&#47;nico&#47;&quot;
}
</pre>
<p>事实上，这个变量包含了所有 <a href="https://github.com/lepture/nico/blob/master/package.json">nico/package.json</a> 的信息。</p>
<h3 id="theme">theme</h3>
<p>全局变量，由主题提供，也就是说是由 <code>theme.js</code> 暴露出来的变量。</p>
<h3 id="config">config</h3>
<p>全局变量，这个是用户的配置信息，所有的配置信息都可以通过 config 获取。</p>
<h3 id="resource">resource</h3>
<p>全局变量，用户总共有哪些资源。</p>

<ul>
<li>resource.posts: 所有的文章 (使用 <code>read</code> filter 来获取完整的文章)</li>
<li>resource.pages: 所有的页面</li>
</ul>
<h3 id="post">post</h3>
<p>模板变量，有 PostWriter 与 PageWriter 渲染的模板有该变量。</p>

<ul>
<li>post.title: 文章的标题</li>
<li>post.meta: 文章的所有元数据</li>
<li>post.pubdate: 文章的发布时间(only available in <code>post.html</code>)</li>
<li>post.tags: 文章的标签</li>
<li>post.html: 渲染好的 html</li>
<li>post.directory: 文章文件所在的目录</li>
<li>post.status: 文章的状态</li>
<li>post.toc: tabe of content of the post</li>
</ul>

<p>You can get every raw data from <code>post.meta</code> that you defined.</p>
<h3 id="pagination">pagination</h3>
<p>模板变量，对文章有批量操作的 writer 会有该变量，比如 ArchiveWriter。</p>

<ul>
<li>pagination.page: current page of the pagination</li>
<li>pagination.pages: total pages the pagination has</li>
<li>pagination.perpage: count of post that perpage has</li>
<li>pagination.total_items: all the items</li>
<li>pagination.total: total count of the pagination</li>
<li>pagination.items: items for current page</li>
<li>pagination.has_prev: has a previous page?</li>
<li>pagination.prev_num: previous page number</li>
<li>pagination.has_next: has a next page?</li>
<li>pagination.next_num: next page number</li>
<li>pagination.iter_pages: iter pages of the pagination</li>
</ul>

<p><strong>NOTICE</strong></p>

<p>The item in <code>pagination.items</code> is not a full post, you should use <code>read</code> filter to get the rendered html.</p>
<h2 id="方法">方法</h2>
<p>方法是一些函数，你可以通过配置来新增一些方法。</p>

<p>内置的方法有：</p>
<h3 id="permalink-url">permalink_url</h3>
<p>根据用户配置的 permalink style 来生成文章的链接。比如 <code>{{permalink_url(post)}}</code>。</p>
<h3 id="content-url">content_url</h3>
<p>用来生成某地址的相对链接，比如当前所在页为 <code>a/b.html</code>，在该页面里的 <code>{{content_url(&#39;index.html&#39;)}}</code> 将生成 <code>../</code>。</p>
<h3 id="static-url">static_url</h3>
<p>同 content_url ，用来生成静态文件的链接。如当前页为 <code>a/b.html</code>，那么 <code>{{static_url(&#39;css/a.css&#39;)}}</code> 将生成  <code>../static/css/a.css</code>。</p>
<h2 id="filter">filter</h2>
<p>你需要了解 filter 是什么，请先阅读 swig 的文档。代码上来讲，filter 也是一类方法。</p>

<p>你可以通过配置来新增一些 filter。</p>

<p>The built in filters of nico:</p>
<h3 id="xmldatetime">xmldatetime</h3>
<p>Generate a <code>ISOString</code> of the Date.</p>
<h3 id="markdown">markdown</h3>
<p>Render the raw text to html with markdown.</p>
<h3 id="highlight">highlight</h3>
<p>Highlight a code block with specified language.</p>
<h3 id="read">read</h3>
<p>Read is designed for <code>pagination.items</code>, to fulfill the post.</p>
<h3 id="sortby">sortby</h3>
<p>Sort items by a key. For example:</p>
<pre>{{ items|sortby(&#39;pubdate&#39;) }}

&#47;&#47; reverse sort
{{ items|sortby(&#39;-pubdate&#39;) }}
</pre></div>
</div>
</div>
    <div class="footer">
 Nico was created by lepture, concept based on liquidluck. brought to you under the BSD license.
      <p class="copyright">powered by <a href="http://lab.lepture.com/nico/">nico</a> 0.4.4</p>
    </div>
    <div class="github"><a class="github-link" href="https://github.com/lepture/nico">Fork me on GitHub</a></div>
  </body>
</html>